<!DOCTYPE mapper PUBLIC 
    "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="id.mbingweb.chatbotportalv1.mapper.AppUserMapper">
    <resultMap id="AppUserMap" type="AppUser">
        <id column="userId" property="userId" />
        <result column="userName" property="userName" />
        <result column="encPassword" property="encPassword" />
        <result column="userFirstName" property="userFirstName" />
        <result column="userLastName" property="userLastName" />
        <result column="isActive" property="isActive" />
        
        <collection property="userRoles" ofType="AppRole">
            <id column="roleId" property="roleId" />
            <result column="roleName" property="roleName" />
        </collection>
    </resultMap>
    
    <select id="findAllUsers" resultMap="AppUserMap">
        SELECT  user_id AS userId, username AS userName, password AS encPassword, 
                firstname AS userFirstName, lastname AS userLastName, 
                is_active AS isActive
        FROM    app_user
    </select>
    
    <select id="findUserByUsername" resultMap="AppUserMap" parameterType="String">
        SELECT  user_id AS userId, username AS userName, password AS encPassword, 
                firstname AS userFirstName, lastname AS userLastName, 
                is_active AS isActive
        FROM    app_user
        WHERE   username = #{userName}
    </select>
</mapper>